{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{528:function(n,e,a){\"use strict\";a.r(e);var t=a(62),s=Object(t.a)({},(function(){var n=this.$createElement,e=this._self._c||n;return e(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":this.$parent.slotKey}},[e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[this._v('<template>\\n  <headerMenu>\\n    <form class=\"ui form\">\\n      <div class=\"inline fields\">\\n        <div class=\"field flex\">\\n          <label>查询内容</label>\\n          <div id=\"ipt-search-comp\"\\n               class=\"ui search selection dropdown\"\\n               style=\"min-width: 16em;\">\\n            <input\\n              id=\"ipt-search\"\\n              class=\"search\"\\n              tabindex=\"0\"\\n              autocomplete=\"off\"\\n              placeholder=\"输入查询条件\"\\n              v-model=\"searchValue\"\\n            />\\n            <div class=\"close\" v-show=\"schVal\" @click=\"clear\">\\n              <i class=\"remove icon\"></i>\\n            </div>\\n            <div\\n              id=\"ipt-search-menu\"\\n              class=\"menu\"\\n              @click=\"(e) => setSearchScope(e.target.innerText)\"\\n              tabindex=\"-1\"\\n            >\\n              <div class=\"item\">\\n                <span style=\"color: grey;\">关键词:</span>\\n                {{ searchValue }}\\n              </div>\\n              <div class=\"item\">\\n                <span style=\"color: grey;\">&nbsp;&nbsp;&nbsp;&nbsp;渠道:</span>\\n                {{ searchValue }}\\n              </div>\\n              <div class=\"item\" :data-value=\"searchValue\">\\n                <span style=\"color: grey;\">&nbsp;&nbsp;&nbsp;&nbsp;来源:</span>\\n                {{ searchValue }}\\n              </div>\\n              <div class=\"item\">\\n                <span style=\"color: grey;\">&nbsp;&nbsp;&nbsp;&nbsp;标题:</span>\\n                {{ searchValue }}\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n\\n        <div class=\"field\">\\n          <label>身份信息</label>\\n          <div class=\"ui radio checkbox\">\\n            <input\\n              id=\"radio-isIdentity-all\"\\n              type=\"radio\"\\n              v-model=\"params.query_params.has_identity\"\\n              :value=\"-1\"\\n              name=\"identity\"\\n            />\\n            <label for=\"radio-isIdentity-all\">全部</label>\\n          </div>\\n          <div class=\"ui radio checkbox\" style=\"margin-right: 1em\">\\n            <input\\n              id=\"radio-isIdentity-y\"\\n              type=\"radio\"\\n              v-model=\"params.query_params.has_identity\"\\n              :value=\"0\"\\n              name=\"identity\"\\n            />\\n            <label for=\"radio-isIdentity-y\">没有</label>\\n          </div>\\n          <div class=\"ui radio checkbox\">\\n            <input\\n              id=\"radio-isIdentity-n\"\\n              type=\"radio\"\\n              v-model=\"params.query_params.has_identity\"\\n              :value=\"1\"\\n              name=\"identity\"\\n            />\\n            <label for=\"radio-isIdentity-n\" style=\"margin-right: 2em\">有</label>\\n          </div>\\n        </div>\\n\\n\\n\\n       <div class=\"field flex\">\\n        <label>爬取时间</label>\\n        <myCalendar @change=\"changeCreateTime\"\\n                    style=\"min-width:15.6em\"></myCalendar>\\n      </div>\\n        <div class=\"field flex\">\\n          <label>机器判断</label>\\n          <div :class=\"[\\'ui\\', \\'selection\\', \\'dropdown\\',\\n          \\'selectDropdown\\',params.query_params.auto_check !== -1 ?\\n          \\'clearable\\' : \\'\\']\"\\n               id=\"auto_check\"\\n               style=\"width: 12em\">\\n            <input type=\"hidden\" name=\"language\" value=\"auto_check\" />\\n            <i class=\"dropdown icon\"></i>\\n            <div class=\"default text\">请选择</div>\\n            <div class=\"menu\">\\n              <div class=\"item\" :data=\"0\">待分析</div>\\n              <div class=\"item\" :data=\"1\">通缉令</div>\\n              <div class=\"item\" :data=\"2\">非通缉令</div>\\n              <div class=\"item\" :data=\"3\">未知</div>\\n            </div>\\n          </div>\\n        </div>\\n\\n      </div>\\n\\n      <div class=\"inline fields\">\\n        <div class=\"field flex\">\\n          <label>人工复核</label>\\n          <div :class=\"[\\'ui\\', \\'selection\\', \\'dropdown\\',\\n          \\'selectDropdown\\',params.query_params.manual_check !== -1 ?\\n          \\'clearable\\' : \\'\\']\"\\n               id=\"manual_check\"\\n               style=\"width: 16em\">\\n            <input type=\"hidden\" name=\"language\" value=\"manual_check\" />\\n            <i class=\"dropdown icon\"></i>\\n            <div class=\"default text\">请选择</div>\\n            <div class=\"menu\">\\n              <div class=\"item\" :data=\"0\">待标记</div>\\n              <div class=\"item\" :data=\"1\">通缉令</div>\\n              <div class=\"item\" :data=\"2\">非通缉令</div>\\n            </div>\\n          </div>\\n        </div>\\n\\n         <div class=\"field\">\\n          <label>处理状态</label>\\n          <div class=\"ui radio checkbox\">\\n            <input\\n              id=\"radio-all\"\\n              type=\"radio\"\\n              v-model=\"params.query_params.state\"\\n              :value=\"-1\"\\n              name=\"pushed\"\\n            />\\n            <label for=\"radio-all\">全部</label>\\n          </div>\\n          <div class=\"ui radio checkbox\">\\n            <input\\n              id=\"radio-pushed\"\\n              type=\"radio\"\\n              v-model=\"params.query_params.state\"\\n              :value=\"1\"\\n              name=\"pushed\"\\n            />\\n            <label for=\"radio-pushed\">未处理</label>\\n          </div>\\n          <div class=\"ui radio checkbox\">\\n            <input\\n              id=\"radio-forbidden\"\\n              type=\"radio\"\\n              v-model=\"params.query_params.state\"\\n              :value=\"2\"\\n              name=\"pushed\"\\n            />\\n            <label for=\"radio-forbidden\">已处理</label>\\n          </div>\\n        </div>\\n\\n\\n      <div class=\"field flex\">\\n        <label>发布时间</label>\\n        <myCalendar @change=\"changePublicTime\"\\n                    style=\"min-width:15.5em\"></myCalendar>\\n      </div>\\n        <div class=\"field flex\">\\n          <label>标记备注</label>\\n          <div :class=\"[\\'ui\\', \\'selection\\', \\'dropdown\\',\\n          \\'selectDropdown\\',params.query_params.untrust !== -1 ?\\n          \\'clearable\\' : \\'\\']\"\\n               id=\"untrust\"\\n               style=\"width: 12em\">\\n            <input type=\"hidden\" name=\"language\" value=\"untrust\" />\\n            <i class=\"dropdown icon\"></i>\\n            <div class=\"default text\">请选择</div>\\n            <div class=\"menu\">\\n              <div class=\"item\" :data=\"0\">可信渠道</div>\\n              <div class=\"item\" :data=\"1\">不可信渠道</div>\\n            </div>\\n          </div>\\n          <button\\n            class=\"ui button\"\\n            @click=\"search\"\\n            type=\"button\"\\n            style=\"margin-left: 10px\"\\n          >查询</button>\\n\\n          <button\\n            class=\"ui button\"\\n            @click=\"down\"\\n            type=\"button\"\\n            style=\"margin-left: 10px\"\\n          >下载</button>\\n\\n        </div>\\n\\n      </div>\\n    </form>\\n\\n    <myTable ref=\"table\" :columns=\"columns\" :list=\"list\" @sort=\"sort\"\\n             @search=\"searchID\">\\n      <template #dup_id=\"{ data }\">\\n          <a v-if=\"data\" style=\"cursor: pointer\" @click=\"gotoPage(data)\">{{ data\\n            }}</a>\\n          <span v-else>-</span>\\n      </template>\\n      <template #title=\"{ data, list }\">\\n        <div class=\"line\" :data-content=\"list.url\">\\n          <a :href=\"list.url\" target=\"_blank\">{{ data || \\'-\\' }}</a>\\n        </div>\\n      </template>\\n      <template #manual_check=\"{ data, list }\">\\n        <select\\n          class=\"ui selection dropdown check\"\\n          :value=\"data || \\'\\'\"\\n          @change=\"(value) => manualCheck(value, list.id)\"\\n        >\\n          <option value>请选择</option>\\n          <option :value=\"1\">是</option>\\n          <option :value=\"2\">否</option>\\n        </select>\\n      </template>\\n      <template #untrust=\"{ data, list }\">\\n        <select\\n          class=\"ui selection dropdown check\"\\n          :value=\"data\"\\n          @change=\"(value) => untrustChange(value, list.id)\"\\n        >\\n          <option value>请选择</option>\\n          <option :value=\"0\">可信渠道</option>\\n          <option :value=\"1\">不可信</option>\\n        </select>\\n      </template>\\n      <template #state=\"{ data, list }\">\\n        <div class=\"deal_state\">\\n          <a :class=\"[\\'ui\\',\\n          data === 1 ? \\'green\\' : \\'grey\\',\\'empty\\',\\'circular\\',\\'label\\']\"></a>\\n          <span :style=\"{paddingLeft: \\'5px\\',\\n          color:  data === 1 ? \\'\\' : \\'grey\\'}\">{{data === 1 ? \\'未处理\\' : \\'已处理\\'}}</span>\\n        </div>\\n      </template>\\n      <template #option=\"{ data, list }\">\\n        <div>\\n\\x3c!--          <a :href=\"list.url+\\'?wanted_order_src_id=\\'+list.id\" target=\"_blank\">校验</a>&nbsp;&nbsp;|&nbsp;--\\x3e\\n          <span style=\"color: #4183c4;cursor: pointer\" @click=\"openUrlWithRecord(list.id,list.url)\">校验</span>&nbsp;&nbsp;|&nbsp;\\n\\x3c!--          <NuxtLink target=\"_blank\" :to=\"`/record?id=${list.id}&url=${list.url}`\">校验</NuxtLink>&nbsp;&nbsp;|&nbsp;--\\x3e\\n          <a target=\"_blank\" @click=\"showModal(list.id)\" style=\"cursor: pointer\">详细</a>\\n        </div>\\n      </template>\\n    </myTable>\\n    <myPage :totals=\"totals\" @current-change=\"pageChange\" :currentPage=\"params.page_params.page\"></myPage>\\n    <modal ref=\"identity\"></modal>\\n  </headerMenu>\\n</template>\\n<script setup>\\nimport headerMenu from \\'../../components/common/header-menu\\';\\nimport myTable from \\'../../components/common/my-table\\';\\nimport myPage from \\'../../components/common/my-page\\';\\nimport myCalendar from \\'../../components/common/my-calendar\\';\\nimport message from \\'../../components/common/message/index\\';\\nimport modal from \\'./modal\\';\\nimport columns from \\'./columns.js\\';\\nimport copyContent from \\'../../utils/copyContent\\';\\nimport { getWantedOrderList, setManualCheck, setUntrust, wantedOrderListById } from\\n                                                            \\'../../api/checkList\\';\\nimport {\\n  reactive, ref, nextTick, onMounted, onUpdated, getCurrentInstance,\\n  computed\\n}                                             from \\'@nuxtjs/composition-api\\';\\n\\nconst keyword = ref(\\'\\')\\nlet list = ref([]);\\nlet totals = ref(0);\\nlet searchValue = ref(\\'\\');\\nlet searchScope = ref(\\'标题\\');\\nconst ctx = getCurrentInstance()\\nconst params = reactive({\\n  page_params: {\\n    page: 1,\\n    page_size: 10\\n  },\\n  order_params: { name: \\'create_time\\', direction: 0 },\\n  query_params: {\\n    // create_time: { begin: null, end: null },\\n    // public_time: { begin: null, end: null },\\n    state: -1,\\n    auto_check: -1,\\n    manual_check: -1,\\n    has_identity: -1,\\n    untrust: -1,\\n    keyword: \\'\\'\\n  }\\n});\\n\\nconst initDropdown = () => {\\n  $(\\'.ui.dropdown.check\\').dropdown()\\n}\\n\\nconst gotoPage = async (id) => {\\n  let res = await wantedOrderListById({id})\\n  let url = JSON.parse(res.data.data).url\\n  window.open(url, \\'_blank\\')\\n}\\n\\nonMounted(async () => {\\n  await getList(params);\\n\\n  nextTick(() => {\\n    initDropdown()\\n    bindPopup()\\n  })\\n\\n  $(\\'#ipt-search\\').focus(function () {\\n    let val = searchValue?.value;\\n    val = val?.replace(/关键词[:：]|渠道[:：]|来源[:：]|标题[:：]/, \\'\\');\\n    searchValue.value = val?.trim();\\n    this.parentElement.classList.add(\\'active\\', \\'visible\\');\\n    $(\\'#ipt-search-menu\\').addClass([\\'transition\\', \\'visible\\']);\\n  })\\n\\n  $(\\'#ipt-search\\').blur(function () {\\n    setTimeout(() => {\\n      this.parentElement.classList.remove(\\'active\\', \\'visible\\');\\n      $(\\'#ipt-search-menu\\').removeClass(\\'transition\\', \\'visible\\');\\n      let searchValue1 = searchValue?.value;\\n      let searchScope1 = searchScope?.value;\\n      if (searchScope1 && searchValue1?.indexOf(searchScope1) === -1) {\\n        let value = searchScope1 + \":\" + searchValue1.replace(/关键词[:：]|渠道[:：]|来源[:：]|标题[:：]/, \\'\\');\\n        searchValue.value = value?.trim();\\n      }\\n    }, 200);\\n  })\\n})\\n\\n\\nonUpdated(() => {\\n  nextTick(() => {\\n    initDropdown()\\n    bindPopup()\\n  })\\n})\\n\\nconst bindPopup = () => {\\n    $(\\'.line\\').popup({\\n      position: \\'bottom center\\',\\n      hoverable: true,\\n      delay: {\\n        show: 300,\\n        hide: 500\\n      },\\n      onShow: () => {\\n        $(\\'.ui.popup\\').on(\\'click\\', copyContent)\\n      },\\n      onHide: () => {\\n        $(\\'.ui.popup\\').off(\\'click\\', copyContent)\\n      }\\n    });\\n\\n    $(\\'.selectDropdown\\').each(function () {\\n      $(this).dropdown({\\n        onChange: (value, text, $selectedItem) => {\\n          let val = value ? parseInt($selectedItem.attr(\\'data\\')) : -1\\n          params.query_params[$(this).attr(\\'id\\')] = val\\n        },\\n      })\\n    });\\n}\\n\\n\\nconst getList = async function (params) {\\n  let res = await getWantedOrderList(params);\\n  let data = JSON.parse(res.data.data);\\n  list.value = data.data;\\n  totals.value = data.page_info.count;\\n  // this.$refs.table.reset()\\n  ctx.refs.table.reset()\\n  // console.log(ctx.refs.table, \\'table\\');\\n  // this.$refs.loading.finish()\\n};\\n\\nconst manualCheck = async (e, id) => {\\n  const res = await setManualCheck({\\n    id: id,\\n    manual_check: e.target.selectedIndex,\\n    check_user: \\'test\\'\\n  })\\n  if (res.data.retcode === 0) ctx.proxy.$message(\\'success\\', \\'修改成功\\')\\n  await getList(params);\\n}\\n\\nconst untrustChange = async (e, id) => {\\n  const res = await setUntrust({\\n    id: id,\\n    untrust: e.target.selectedIndex-1,\\n  })\\n  if (res.data.retcode === 0) ctx.proxy.$message(\\'success\\', \\'修改成功\\')\\n  await getList(params);\\n}\\n\\nconst pageChange = async function (page) {\\n  params.page_params.page = page;\\n  await getList(params);\\n};\\nconst changeCreateTime = (date) => {\\n  // params.query_params.create_time = date\\n  params.query_params.create_time = {\\n    begin : date.begin && `${ date.begin } 00:00:00`,\\n    end   : date.end && `${ date.end } 23:59:59`\\n  }\\n}\\nconst changePublicTime = (date) => {\\n  // params.query_params.public_time = date\\n  params.query_params.public_time = {\\n    begin : date.begin && `${ date.begin } 00:00:00`,\\n    end   : date.end && `${ date.end } 23:59:59`\\n  }\\n}\\n\\n\\nconst schVal = computed(() =>\\n  searchValue.value?.replace(/关键词[:：]|渠道[:：]|来源[:：]|标题[:：]/, \\'\\'))\\n\\nconst search = async () => {\\n  // let schVal = searchValue.value;\\n  let scpVal = searchScope.value;\\n  let qparams = params.query_params;\\n  params.page_params.page = 1\\n  qparams.keyword = \\'\\';\\n  qparams.source = \\'\\';\\n  qparams.title = \\'\\';\\n  qparams.channel = \\'\\';\\n  // schVal = schVal.replace(/关键词[:：]|渠道[:：]|来源[:：]|标题[:：]/, \\'\\');\\n  if (scpVal === \\'渠道\\') {\\n    qparams.channel = schVal.value;\\n  } else if (scpVal === \\'来源\\') {\\n    qparams.source = schVal.value;\\n  } else if (scpVal === \\'标题\\') {\\n    qparams.title = schVal.value;\\n  } else {\\n    qparams.keyword = schVal.value;\\n  }\\n  await getList(params);\\n}\\n\\nconst sort = async (param) => {\\n  params.order_params = { name: param.sortColumn, direction: param.sortBy }\\n  await getList(params);\\n}\\n\\nconst identity = ref(null);\\nconst showModal = (id) => {\\n  // message.success(\\'111\\')\\n  identity.value.show(id)\\n}\\n\\nconst setSearchScope = (value) => {\\n  value = value.split(\\':\\')[0];\\n  searchScope.value = value ? value.trim() : \\'\\';\\n}\\n\\nlet otherWin   = ref(null)\\nlet sendParams = reactive({})\\nconst openUrlWithRecord = (id, url) => {\\n  sendParams.id   = id;\\n  otherWin.value  = window.open(url);\\n}\\n\\nconst clear = () => {\\n  searchValue.value = `${searchScope.value}:`\\n}\\n\\nconst searchID = async (filter) => {\\n  let id = filter[0]?.value || \\'\\'\\n  if (!id){\\n    await getList(params);\\n  } else {\\n    let res = await wantedOrderListById({id})\\n    let data = JSON.parse(res.data.data)\\n    if(data) {\\n      list.value = [data]\\n      totals.value = 1\\n    }else {\\n      list.value = []\\n      totals.value = 0\\n    }\\n  }\\n}\\n\\nconst down = async () => {\\n  let downList = []\\n  for (let i = 1; i <= Math.ceil(totals.value/5000); i++) {\\n    let res = await getWantedOrderList({\\n      page_params: {\\n        page: i,\\n        page_size: 5000\\n      },\\n      order_params: { name: \\'create_time\\', direction: 0 },\\n      query_params: {}\\n    });\\n    let data = JSON.parse(res.data.data).data;\\n    downList = downList.concat(data)\\n  }\\n  let blob = new\\n  Blob([JSON.stringify(downList, null, 2)],{type:\\'application/json,charset=utf-8;\\'});\\n  let Link = document.createElement(\\'a\\');\\n  Link.setAttribute(\\'href\\', window.URL.createObjectURL(blob))\\n  Link.setAttribute(\\'download\\', \\'wanted-order.json\\')\\n  Link.style.display = \\'none\\'\\n  Link.click()\\n  // Link.download = \"wanted-order.txt\";\\n  // Link.style.display = \\'none\\';\\n  // 字符内容转变成blob地址\\n  // let blob = new Blob(downList);\\n  // Link.href = URL.createObjectURL(blob);\\n  // 触发点击\\n  // document.body.appendChild(Link);\\n  // Link.click();\\n  // 然后移除\\n  // document.body.removeChild(Link);\\n}\\n\\nonMounted(() => {\\n  // 监听window.open打开的子页面发送过来的消息\\n  window.addEventListener(\\'message\\', (e) => {\\n    if (e.data.cmd === \\'DOMLoaded\\') {\\n      otherWin.value.postMessage({\\n        cmd    : \\'wanted_order_src_id\\',\\n        content: sendParams.id\\n      }, \\'*\\')\\n    }\\n  })\\n})\\n<\\/script>\\n\\n<style scoped>\\n.ui.button {\\n  background: #3e91f7;\\n  color: white;\\n}\\n\\n::v-deep .ui.form .inline.fields .field {\\n  padding-right: 4em;\\n}\\n\\n/*::v-deep #search > .ui.selection.dropdown option {*/\\n/*  min-width: 4em;*/\\n/*}*/\\n\\n::v-deep .ui.selection.dropdown,\\n.ui.selection.dropdown.option {\\n  min-width: 3em;\\n}\\n\\n.ui.radio.checkbox {\\n  padding-right: 1em;\\n  cursor: pointer;\\n}\\n::v-deep .ui.form .inline.fields .field>label {\\n  font-size: 14px;\\n  /* color: #606266; */\\n  /* font-weight: normal; */\\n}\\n\\n.deal_state{\\n  display: flex;\\n  justify-content:center;\\n  align-items: center;\\n}\\n\\n.deal_state a {\\n  font-size: .5em;\\n}\\n\\n.option {\\n  display: flex;\\n  justify-content: space-around;\\n}\\n\\n.ui.radio.checkbox {\\n    padding-right: 0.5em\\n}\\n\\n  .flex {\\n    display: flex;\\n    align-items: center;\\n  }\\n\\n  .close {\\n    position: absolute;\\n    right: .5em;\\n    top: 10px;\\n    color: rgb(167, 167, 167);\\n    cursor: pointer;\\n    z-index: 1000;\\n  }\\n</style>\\n\\n\\n')])])])])}),[],!1,null,null,null);e.default=s.exports}}]);","extractedComments":[]}